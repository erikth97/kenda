---
// Solo importamos el componente Image de Astro
import { Image } from 'astro:assets';

// Interfaces TypeScript 
interface HeroProps {
  title?: string;
  subtitle?: string;
}

// Props con valores por defecto
const { 
  title = "¿Te interesa ser Distribuidor KENDA?",
  subtitle = "Completa el formulario para agendar una llamada" 
} = Astro.props as HeroProps;

// División del título en DOS líneas - CORREGIDO
const titleParts = title.split(" ");
const firstLine = titleParts.slice(0, 3).join(" "); // "¿Te interesa ser"
const secondLine = titleParts.slice(3).join(" "); // "Distribuidor KENDA?"
---

<section id="hero" class="h-screen w-full relative overflow-hidden">
  <!-- Estructura de fondo -->
  <div class="absolute inset-0 z-0">
    <!-- Fondo izquierdo con estadio y cuadrícula blanca -->
    <div class="absolute inset-0 w-full h-full">
      <!-- Imagen de fondo del estadio con filtro - usando rutas estándar -->
      <div class="absolute inset-0 w-full h-full filter-img">
        <img src="/images/hero/gradas-background.png" alt="" class="w-full h-full object-cover" />
      </div>
      
      <!-- Overlay de cuadrícula blanca sobre el estadio - cuadros grandes -->
      <div class="absolute inset-0 w-full h-full grid-background"></div>
      
      <!-- Degradado mejorado al final de la sección -->
      <div class="absolute bottom-0 left-0 right-0 h-48 bg-gradient-to-t from-gray-100 via-gray-100/80 to-transparent"></div>
    </div>
    
    <!-- Contenedor para mapa y elementos superpuestos - SOLO VISIBLE EN DESKTOP -->
    <div class="absolute top-0 right-0 w-4/5 h-full overflow-hidden translate-x-8 hidden md:block">
      <!-- Imagen combinada de México con el hombre -->
      <div class="absolute inset-0">
        <img 
          src="/images/hero/map-man.webp" 
          alt="Mapa de México con distribuidor" 
          class="h-full w-full object-cover opacity-90"
          loading="lazy"
        />
      </div>
    </div>
  </div>
  
  <!-- Logo KENDA en la posición del círculo rojo (superior izquierda) -->
  <div class="absolute top-4 md:top-8 left-4 md:left-8 z-20">
    <img src="/images/kenda-logo.png" alt="KENDA" class="h-12 sm:h-16 md:h-24 lg:h-28" />
  </div>
  
  <!-- Logo "Motos y Equipos" - responsive: arriba en móvil, derecha en desktop -->
  <div class="absolute top-4 left-1/2 transform -translate-x-1/2 md:translate-x-0 md:left-auto md:top-11 md:right-8 z-20">
    <img 
      src="/images/motos_equipos.webp" 
      alt="Motos y Equipos" 
      class="h-8 sm:h-10 md:h-12 lg:h-10 object-contain opacity-90" 
      loading="lazy"
    />
  </div>
  
  <!-- Contenido principal -->
  <div class="relative z-10 h-full w-full">
    <!-- Contenido lado izquierdo - adaptable para móvil -->
    <div class="absolute inset-0 w-full md:w-2/5 flex flex-col justify-center p-4 md:p-8 lg:p-16">
      <!-- Contenedor para contenido - adaptado para móvil -->
      <div class="flex flex-col mt-4 md:mt-8">
        <!-- Título en DOS líneas con tamaño aumentado y responsive -->
        <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-8xl xl:text-9xl 2xl:text-[10rem] font-black text-black leading-[0.9] tracking-tight">
          <span class="block">{firstLine}</span>
          <span class="block">{secondLine}</span>
        </h1>
        
        <!-- Subtítulo - responsive para móvil -->
        <p class="text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl text-black my-3 sm:my-4 md:my-6 lg:my-8 font-light">
          <span class="md:whitespace-nowrap">{subtitle}</span>
        </p>
        
        <!-- Tarjeta CTA centrada en móvil -->
        <div class="bg-white rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-3 shadow-lg w-full max-w-[280px] sm:max-w-xs border border-gray-100 mx-auto md:mx-0">
          <div class="text-center">
            <p class="block text-sm sm:text-base font-medium text-gray-700 mb-3 sm:mb-4">Empezar registro</p>
            
            <!-- Botón scroll animado responsive -->
            <button
              type="button"
              id="scroll-to-form-button"
              aria-label="Ir al formulario de registro"
              class="mx-auto bg-[#F7941D] hover:bg-[#e8841a] text-white rounded-full flex items-center justify-center transition-all duration-300 w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 shadow-lg hover:shadow-xl transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-orange-300 animated-pulse-glow"
            >
              <svg 
                xmlns="http://www.w3.org/2000/svg" 
                fill="none" 
                viewBox="0 0 24 24" 
                stroke-width="2.5" 
                stroke="currentColor" 
                class="w-7 h-7 md:w-8 md:h-8 animate-bounce-gentle" 
                id="arrow-down-icon"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3" />
              </svg>
            </button>
            
            <!-- Texto de ayuda responsive -->
            <p class="text-gray-500 text-xs sm:text-sm mt-2 sm:mt-3">
              Haz clic para completar tu registro
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  

</section>

<!-- Script simplificado para scroll suave -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const scrollButton = document.getElementById('scroll-to-form-button');
    const arrowIcon = document.getElementById('arrow-down-icon');
    
    if (scrollButton && arrowIcon) {
      scrollButton.addEventListener('click', function() {
        // Añadir efecto de click
        scrollButton.classList.add('animate-pulse');
        arrowIcon.classList.remove('animate-bounce-gentle');
        arrowIcon.classList.add('animate-spin');
        
        // Scroll suave al formulario
        setTimeout(() => {
          const formularioSection = document.getElementById('formulario');
          if (formularioSection) {
            formularioSection.scrollIntoView({ 
              behavior: 'smooth',
              block: 'start',
              inline: 'nearest'
            });
            
            // Actualizar URL con hash
            history.pushState(null, '', '#formulario');
          }
          
          // Restaurar animaciones después del scroll
          setTimeout(() => {
            scrollButton.classList.remove('animate-pulse');
            arrowIcon.classList.remove('animate-spin');
            arrowIcon.classList.add('animate-bounce-gentle');
          }, 1000);
        }, 200);
      });
      
      // Efectos hover mejorados
      scrollButton.addEventListener('mouseenter', () => {
        arrowIcon.style.transform = 'translateY(2px)';
      });
      
      scrollButton.addEventListener('mouseleave', () => {
        arrowIcon.style.transform = 'translateY(0)';
      });
    }
  });
</script>

<style>
  /* Filtro para la imagen de las gradas */
  .filter-img {
    filter: brightness(0.9) contrast(0.9);
  }
  
  .filter-img::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(245, 245, 245, 0.7);
  }
  
  /* Cuadrícula con cuadros grandes */
  .grid-background {
    background-image: 
      linear-gradient(rgba(255, 255, 255, 0.3) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.3) 1px, transparent 1px);
    background-size: 80px 80px;
    background-position: center;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  /* Animaciones para el botón CTA */
  .animated-pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }
  
  @keyframes pulseGlow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(247, 148, 29, 0.5);
    }
    50% {
      box-shadow: 0 0 30px rgba(247, 148, 29, 0.8);
    }
  }
  
  /* Animación suave de bounce para la flecha */
  .animate-bounce-gentle {
    animation: bounceGentle 2s ease-in-out infinite;
  }
  
  @keyframes bounceGentle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-4px);
    }
  }
  
  /* Transiciones suaves */
  #scroll-to-form-button {
    transition: all 0.3s ease;
  }
  
  #arrow-down-icon {
    transition: transform 0.2s ease;
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .grid-background {
      background-size: 60px 60px;
    }
  }
    
  /* Focus states para accesibilidad */
  #scroll-to-form-button:focus-visible {
    outline: 2px solid #F7941D;
    outline-offset: 2px;
  }
</style>